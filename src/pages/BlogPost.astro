---
import { ReadingTime } from "@utils/Reading";
import { Image } from "astro:assets";

const { post } = Astro.props;
const formatPubTime = post.pubDate.toString().slice(0, 10);

const readingTime = ReadingTime(post.id + '.md');
---

<article
  class="flex flex-col md:flex-row gap-4 lg:gap-6 not-first:pt-4 not-last:pb-4 md:not-first:pt-6 md:not-last:pb-6 not-last:border-b border-base-300"
>
  <div class="md:basis-1/3 md:shrink-0">
    <Image
      src={post.image.url}
      loading="lazy"
      alt={post.image.alt}
      width="4608"
      height="2592"
      decoding="async"
      class="w-full h-[168px] xs:h-[250px] md:h-[168px] md:max-w-[298px] object-cover rounded-box"
    />
  </div>
  <div class="flex flex-col md:basis-2/3">
    <div
      class="flex items-start justify-between mb-4 text-sm leading-none"
      data-astro-transition-scope="astro-bo4enmig-2"
    >
      {
        /* <a
          class="link-default link inline-flex items-center gap-2 bg-primary-base-200 font-medium px-2 py-0.5 rounded-button"
          href="/blog/categories/tools"
        >
          <svg
            width="1em"
            height="1em"
            class="w-4 h-4"
            data-icon="mdi:tools"
          >
            <>
              <symbol id="ai:mdi:tools" viewBox="0 0 24 24">
                <path
                  fill="currentColor"
                  d="m21.71 20.29l-1.42 1.42a1 1 0 0 1-1.41 0L7 9.85A3.8 3.8 0 0 1 6 10a4 4 0 0 1-3.78-5.3l2.54 2.54l.53-.53l1.42-1.42l.53-.53L4.7 2.22A4 4 0 0 1 10 6a3.8 3.8 0 0 1-.15 1l11.86 11.88a1 1 0 0 1 0 1.41M2.29 18.88a1 1 0 0 0 0 1.41l1.42 1.42a1 1 0 0 0 1.41 0l5.47-5.46l-2.83-2.83M20 2l-4 2v2l-2.17 2.17l2 2L18 8h2l2-4Z"
                ></path>
              </symbol>
              <use href="#ai:mdi:tools" />
            </>
          </svg>
          <span class="pb-0.5">tools</span>
        </a> */
      }
      <span class="inline-flex items-center gap-2 text-captions">
        {
          /* <svg
            width="1em"
            height="1em"
            class="w-4 h-4"
            data-icon="mdi:edit-outline"
          >
            <>
              <symbol id="ai:mdi:edit-outline" viewBox="0 0 24 24">
                <path
                  fill="currentColor"
                  d="m14.06 9l.94.94L5.92 19H5v-.92zm3.6-6c-.25 0-.51.1-.7.29l-1.83 1.83l3.75 3.75l1.83-1.83c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29m-3.6 3.19L3 17.25V21h3.75L17.81 9.94z"
                ></path>
              </symbol>
              <use href="#ai:mdi:edit-outline" />
            </>
          </svg> */
        }
        <time itemprop="datePublished" datetime={formatPubTime}>
          {formatPubTime}
        </time>
      </span>
    </div>
    <h2
      class="text-2xl font-bold break-words md:line-clamp-2 mt-0 mb-2"
      data-astro-transition-scope="astro-72dqv6xi-3"
    >
      <a class="link-default link-heading" href={`${post.id}`}>
        {post.title}
      </a>
    </h2>
    <p
      class="text-base mb-4 line-clamp-2"
      data-astro-transition-scope="astro-vug56p2d-4"
    >
      {post.description}
    </p>
    <div class="flex items-center xs:items-end justify-between">
      <div class="flex items-center gap-4">
        <span class="inline-flex items-center gap-2 text-sm text-captions">
          {
            /* <svg
              width="1em"
              height="1em"
              class="w-4 h-4"
              data-icon="mdi:book-open-blank-variant-outline"
            >
              <>
                <symbol
                  id="ai:mdi:book-open-blank-variant-outline"
                  viewBox="0 0 24 24"
                >
                  <path
                    fill="currentColor"
                    d="M12 21.5c-1.35-.85-3.8-1.5-5.5-1.5c-1.65 0-3.35.3-4.75 1.05c-.1.05-.15.05-.25.05c-.25 0-.5-.25-.5-.5V6c.6-.45 1.25-.75 2-1c1.11-.35 2.33-.5 3.5-.5c1.95 0 4.05.4 5.5 1.5c1.45-1.1 3.55-1.5 5.5-1.5c1.17 0 2.39.15 3.5.5c.75.25 1.4.55 2 1v14.6c0 .25-.25.5-.5.5c-.1 0-.15 0-.25-.05c-1.4-.75-3.1-1.05-4.75-1.05c-1.7 0-4.15.65-5.5 1.5m-1-14c-1.36-.6-3.16-1-4.5-1c-1.2 0-2.4.15-3.5.5v11.5c1.1-.35 2.3-.5 3.5-.5c1.34 0 3.14.4 4.5 1zM13 19c1.36-.6 3.16-1 4.5-1c1.2 0 2.4.15 3.5.5V7c-1.1-.35-2.3-.5-3.5-.5c-1.34 0-3.14.4-4.5 1z"
                  ></path>
                </symbol>
                <use href="#ai:mdi:book-open-blank-variant-outline"></use>
              </>
            </svg> */
          }
          <span class="text-nowrap">{readingTime.text}</span>
        </span>
        <ul
          class="not-prose inline-flex items-center flex-wrap gap-2 xs:inline-flex"
        >
          {
            post.tags.map((tag: string) => {
              return (
                <li class="inline-flex items-center">
                  <a href={"/tags/" + tag} class="tag tag-text tag-sm">
                    #{tag}
                  </a>
                </li>
              );
            })
          }
        </ul>
      </div>
      <a
        class="link-default link inline-flex items-center gap-1 text-base font-medium"
        href={`${post.id}`}
      >
        <span class="text-nowrap">Read more</span>
        <svg
          width="1em"
          height="1em"
          class="w-4 h-4"
          data-icon="mdi:arrow-right"
        >
          {/* <> */}
          <symbol id="ai:mdi:arrow-right" viewBox="0 0 24 24">
            <path
              fill="currentColor"
              d="M4 11v2h12l-5.5 5.5l1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5L16 11z"
            >
            </path>
          </symbol>
          <use href="#ai:mdi:arrow-right"></use>
          {/* </> */}
        </svg>
      </a>
    </div>
  </div>
</article>
